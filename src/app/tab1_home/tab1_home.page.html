<ion-menu
  contentId="tab1-content"
  style="
    --ion-background-color: #efefef;
    --ion-text-color: #702c2b;
    --ion-toolbar-background: #efefef;
    --ion-toolbar-color: #925858;
  "
>
  <ion-header>
    <ion-toolbar style="--border-width: 0">
      <ion-title><h2 class="text-xl font-bold text-mainWine mb-4">Menu</h2></ion-title>
      
      <ion-menu-toggle slot="end" class="ion-padding">
        <ion-icon name="close-outline" size="large"></ion-icon>
      </ion-menu-toggle>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding">
    <div class="p-4">
      <div class="space-y-3">
        <button
          (click)="perfil()"
          class="w-full text-left p-3 rounded-lg bg-lighterPink hover:bg-mediumPink transition-colors"
        >
          <div class="flex items-center space-x-3">
            <svg class="w-5 h-5 text-mainWine" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
            </svg>
            <span class="text-mainWine font-medium">Meu Perfil</span>
          </div>
        </button>

        <button
          (click)="planos()"
          class="w-full text-left p-3 rounded-lg bg-lighterPink hover:bg-mediumPink transition-colors"
        >
          <div class="flex items-center space-x-3">
            <svg class="w-5 h-5 text-mainWine" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"></path>
            </svg>
            <span class="text-mainWine font-medium">Planos</span>
          </div>
        </button>

        <button
          (click)="post()"
          class="w-full text-left p-3 rounded-lg bg-lighterPink hover:bg-mediumPink transition-colors"
        >
          <div class="flex items-center space-x-3">
            <svg class="w-5 h-5 text-mainWine" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
            </svg>
            <span class="text-mainWine font-medium">Criar Post</span>
          </div>
        </button>
      </div>
    </div>
  </ion-content>
</ion-menu>

<div class="ion-page" id="tab1-content">
  <ion-content [fullscreen]="true">
    <ion-refresher slot="fixed" (ionRefresh)="recarregarSugestoes($event)">
      <ion-refresher-content></ion-refresher-content>
    </ion-refresher>
    
    <div class="bg-bg relative">
      <!-- Conte√∫do principal -->
      <div class="bg-gradient-to-l from-pinkBrown to-mediumPink flex flex-col">
        <div
          class="bg-gradient-to-l from-pinkBrown to-mediumPink h-20 relative z-10"
        ></div>

        <div
          class="bg-bg px-8 pt-6 pb-40 rounded-t-[100px] relative z-20"
        >
          <div class="pt-6 px-6">
            <h1 class="text-2xl font-semibold text-mainWine">Sugest√£o do Dia</h1>
            <p class="text-neutral-500 text-sm mt-2 text-start">Essa √© a recomenda√ß√£o mais importante, feita sob medida para o seu perfil.</p>
            
            <div *ngIf="carregando" class="mt-6 flex justify-center">
              <ion-spinner name="crescent"></ion-spinner>
            </div>

            <!-- Sugest√£o do dia -->
            <div *ngIf="!carregando && sugestaoDoDia" class="mt-6 bg-white rounded-2xl shadow-lg p-6">
              <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold text-mainWine">{{ sugestaoDoDia.titulo }}</h2>
                <span class="px-3 py-1 bg-pinkBrown text-white text-xs rounded-full">
                  {{ sugestaoDoDia.categoria }}
                </span>
              </div>
              <p class="text-sm text-neutral-600 mb-4">{{ sugestaoDoDia.descricao }}</p>
              <button 
                class="w-full bg-gradient-to-r from-mainWine to-pinkBrown text-white px-6 py-3 rounded-full shadow hover:shadow-lg transition-shadow"
                (click)="verDetalhesSugestao(sugestaoDoDia!)"
              >
                Ver Detalhes
              </button>
            </div>

            <!-- Mensagem quando n√£o h√° sugest√£o -->
            <div *ngIf="!carregando && !sugestaoDoDia" class="mt-6 bg-gray-50 rounded-2xl p-6 text-center">
              <ion-icon name="information-circle-outline" class="text-4xl text-gray-400 mb-2"></ion-icon>
              <p class="text-gray-500">Complete o formul√°rio para receber sugest√µes personalizadas</p>
              <button 
                class="bg-mainWine text-white px-4 py-2 rounded-full text-sm hover:bg-pinkBrown transition-colors"
                (click)="criarDadosTeste()"
              >
                üß™ Criar Dados de Teste
              </button>
            </div>

            <!-- Outras sugest√µes personalizadas -->
            <div *ngIf="!carregando && sugestoesPersonalizadas.length > 0" class="mt-8">
              <h2 class="text-xl font-semibold text-mainWine mb-2">Mais Sugest√µes para Voc√™</h2>
              <p class="text-neutral-500 text-sm mb-4 text-start">Aqui voc√™ encontra outras dicas personalizadas, organizadas por prioridade.</p>
              
              <div class="space-y-4">
                <div 
                  *ngFor="let sugestao of sugestoesPersonalizadas; trackBy: trackBySugestao"
                  class="bg-white rounded-xl shadow-md p-4 border-l-4"
                  [ngClass]="{
                    'border-l-[#D9A066]': sugestao.categoria === 'pele',
                    'border-l-[#D46A6A]': sugestao.categoria === 'maquiagem',
                    'border-l-[#6A8EAE]': sugestao.categoria === 'rotina'
                  }"
                >
                  <div class="flex items-start justify-between mb-2">
                    <h3 class="text-lg font-medium text-mainWine">{{ sugestao.titulo }}</h3>
                    <span class="px-2 py-1 text-xs rounded-full text-white"
                          [ngClass]="{
                            'bg-[#D9A066]': sugestao.categoria === 'pele',
                            'bg-[#D46A6A]': sugestao.categoria === 'maquiagem',
                            'bg-[#6A8EAE]': sugestao.categoria === 'rotina'
                          }">
                      {{ sugestao.categoria }}
                    </span>
                  </div>
                  <p class="text-sm text-neutral-600 mb-3">{{ sugestao.descricao }}</p>
                  <button 
                    class="text-mainWine text-sm font-medium hover:text-pinkBrown transition-colors"
                    (click)="verDetalhesSugestao(sugestao)"
                  >
                    Saiba mais ‚Üí
                  </button>
                </div>
              </div>
            </div>

            <!-- Mensagem quando n√£o h√° outras sugest√µes -->
            <div *ngIf="!carregando && sugestoesPersonalizadas.length === 0 && sugestaoDoDia" class="mt-8 text-center">
              <p class="text-gray-500">Complete o formul√°rio para receber mais sugest√µes personalizadas</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ion-content>
</div>

